<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
<title>Canvas Noise</title>
<link type="text/css" rel="stylesheet" href="css/smoothness/jquery-ui-1.10.1.min.css" />
<link type="text/css" rel="stylesheet" href="css/jquery.colorpicker.min.css" />
<link type="text/css" rel="stylesheet" href="css/styles.css" />
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/jquery.ba-bbq.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.10.1.min.js"></script>
<script type="text/javascript" src="js/jquery.colorpicker.min.js"></script>
<script type="text/javascript" src="js/main.js?v=0.1"></script>
</head>
<body>
<canvas id="canvas"></canvas>
<div id="controls-container">
	<div id="controls">
		<a id="github-fork" href="https://github.com/lencinhaus/canvas-noise/tree/gh-pages" target="_blank">Fork me on GitHub</a>
		<div class="row control">
			<label for="preset">Preset</label>
			<div class="tooltip">
				Choosing one of the presets in the dropdown list will initialize the other parameters with predefined values in order to obtain the chosen effect.
			</div>
			<select id="preset" class="skip">
				<option value="" disabled="disabled" selected="selected">choose one</option>
				<option value="plain">plain noise</option>
				<option value="clouds">clouds</option>
				<option value="turbulence">turbulence</option>
				<option value="marble">marble</option>
				<option value="wood">wood</option>
			</select>
		</div>
		<div class="row control">
			<label for="seed">Seed</label>
			<div class="tooltip">
				This value is used to initialize the pseudorandom number generator.<br />
				It can be any string, even an empty one.
			</div>
			<input type="text" id="seed" />
		</div>
		<div class="row control">
			<label for="color">Color</label>
			<div class="tooltip">
				This parameter controls how noise is mapped to colors in the final image.<br />
				If <strong>greyscale</strong> is chosen, the same noise function is used for all the three color components (RGB), resulting in shades of gray.<br />
				All the other values use three statistically independent noise functions for the three color components.<br />
				The only exception to this is <strong>gradient</strong>, which can either use three or one noise functions depending on whether the <strong>indipendent</strong> flag is selected or not, respectively.<br />
				With <strong>RGB</strong>, the noise functions are directly mapped to the three color components, while with <strong>HSL</strong> and <strong>HSV</strong> they are previously converted from the respective cylindrical coordinates to RGB.<br />
				<strong>gradient</strong> can be used to constrain the color shades inside the colors of a gradient, which can be specified using the <strong>Gradient Start</strong> and <strong>Gradient End</strong> parameters.
			</div>
			<select id="color">
				<option value="greyscale">greyscale</option>
				<option value="gradient">gradient</option>
				<option value="rgb">RGB</option>
				<option value="hsl">HSL</option>
				<option value="hsv">HSV</option>
			</select>
		</div>
		<div id="gradient-container">
			<div class="row control">
				<label for="independentCheckbox">Independent</label>
				<div class="tooltip">
					If this flag is selected, three statistically independent noise functions will be used for each color component; a single noise function will be used otherwise.
				</div>
				<input type="hidden" id="independent" />
				<input type="checkbox" id="independentCheckbox" class="skip" />
			</div>
			<div class="row control color">
				<label for="gradientStart">Gradient Start</label>
				<div class="tooltip">
					Click the box on the right to choose the gradient start color.
				</div>
				<input id="gradientStart" type="hidden" />
				<div id="gradientStartColor"></div>
			</div>
			<div class="row control color">
				<label for="gradientEnd">Gradient End</label>
				<div class="tooltip">
					Click the box on the right to choose the gradient end color.
				</div>
				<input id="gradientEnd" type="hidden" />
				<div id="gradientEndColor"></div>
			</div>
		</div>
		<div class="row control">
			<label for="noiseFunction">Noise Func</label>
			<div class="tooltip">
				This parameter control which algorithm is used for generating the noise value at each point.<br />
				See for reference:
				<ul>
					<li><a href="http://en.wikipedia.org/wiki/Value_noise" target="_blank">Value noise</a></li>
					<li><a href="http://en.wikipedia.org/wiki/Perlin_noise" target="_blank">Classic/improved Perlin noise</a></li>
					<li><a href="http://en.wikipedia.org/wiki/Simplex_noise" target="_blank">Simplex noise</a></li>
				</ul>
			</div>
			<select id="noiseFunction">
				<option value="value">value</option>
				<option value="perlin_classic">classic perlin</option>
				<option value="perlin_improved">improved perlin</option>
				<option value="simplex">simplex</option>
			</select>
		</div>
		<div class="row control" id="smoothing-container">
			<label for="smoothing">Smoothing</label>
			<div class="tooltip">
				This function is used to "smooth" the transition between on noise value and the other in the noise lattice.<br />
				More specifically, given a distance <strong>d</strong> value between two integer noise values in the range [0, 1]:
				<ul>
					<li><strong>cosine</strong>: 0.5 * (1 + cos((1 - <strong>d</strong>) * &pi;))</li>
					<li><strong>hermite</strong>: 3<strong>d</strong>^2 - 2<strong>d</strong>^3</li>
					<li><strong>quintic</strong>: 6<strong>d</strong>^5 - 15<strong>d</strong>^4 + 10<strong>d</strong>^3</li>
				</ul>
				<strong>hermite</strong> smoothing was used in the original implementation of classic Perlin noise, while <strong>quintic</strong> was used in the improved version of the same.
			</div>
			<select id="smoothing">
				<option value="none">none</option>
				<option value="cosine">cosine</option>
				<option value="hermite">hermite</option>
				<option value="quintic">quintic</option>
			</select>
		</div>
		<div class="row control slider">
			<label for="scale">Zoom</label>
			<div class="tooltip">
				The "zooming" factor.<br />
				A value of 1 indicates no zoom (each pixel in the image corresponds exactly to a noise value in the lattice), while 100 is the maximum zoom level (the image shows the interpolated noise between two consecutive noise values in the lattice).
			</div>
			<input id="scale" type="text" readonly="readonly" />
			<div id="scaleSlider" class="slider"></div>
		</div>
		<div class="row control slider">
			<label for="size">Size</label>
			<div class="tooltip">
				This parameter controls the size of the permutation kernel used for randomness. The greater the size, the more distinct noise values can be generated without periodic repetition.
			</div>
			<input id="size" type="text" readonly="readonly" />
			<div id="sizeSlider" class="slider"></div>
		</div>
		<div class="row control slider">
			<label for="octaves">Octaves</label>
			<div class="tooltip">
				The number of noise octaves that are summed in the fractal sum.<br />
				The octaves amplitude and frequency both start at 1, and are multiplied by the <strong>Persistence</strong> and <strong>Lacunarity</strong> factors respectively after each octave value is computed.<br />
				Each octave value is passed through the <strong>Octave Function</strong> below.<br />
				After all octaves have been computed, their values are summed, and the sum is passed through the <strong>Sum Function</strong> below.<br/>
				Finally, after all sum values have been computed, they are scaled to the range [0, 1].
			</div>
			<input id="octaves" type="text" readonly="readonly" />
			<div id="octavesSlider" class="slider"></div>
		</div>
		<div class="row control slider">
			<label for="persistence">Persistence</label>
			<div class="tooltip">
				The octaves amplitude starts at 1, and is multiplied by this factor after each octave value is computed.
			</div>
			<input id="persistence" type="text" readonly="readonly" />
			<div id="persistenceSlider" class="slider"></div>
		</div>
		<div class="row control slider">
			<label for="lacunarity">Lacunarity</label>
			<div class="tooltip">
				The octaves frequency starts at 1, and is multiplied by this factor after each octave value is computed.
			</div>
			<input id="lacunarity" type="text" readonly="readonly" />
			<div id="lacunaritySlider" class="slider"></div>
		</div>
		<div class="row control">
			<label for="octaveFunction">Octave Func</label>
			<div class="tooltip">
				Each octave value is passed through this function. Available options are:
				<ul>
					<li><strong>none</strong>: the value is left untouched;</li>
					<li><strong>absolute</strong>: the value is scaled in the range [-1, 1], the its absolute value is returned;</li>
					<li><strong>custom</strong>: you can manually set the function that will be used.</li>
				</ul>
			</div>
			<select id="octaveFunction">
				<option value="none">none</option>
				<option value="absolute">absolute value</option>
				<option value="custom">custom</option>
			</select>
		</div>
		<div class="row control" id="custom-octave-function-container">
			<label for="customOctaveFunction">Custom Function</label>
			<div class="tooltip">
				Here you can provide the actual body of the javascript function that will be applied to octave values.<br />
				The function takes three arguments:
				<ul>
					<li><strong>n</strong>: the octave value, in the range [0, 1];</li>
					<li><strong>x</strong>: the x coordinate of the value being computed;</li>
					<li><strong>y</strong>: the y coordinate of the value being computed;</li>
					<li><strong>o</strong>: the 1-based number of the octave being computed.</li>
				</ul>
				The function should return a value in the range [0, 1].<br />
				The function declaration (<code>function(x, y, z, o){</code>) and closing bracket are automatically added respectively before and after your code, so you must not write them.<br />
				An example could be:<br />
				<code class="code">return Math.cos(y + n * x);</code>
			</div>
			<textarea id="customOctaveFunction"></textarea>
		</div>
		<div class="row control">
			<label for="sumFunction">Sum Func</label>
			<div class="tooltip">
				Each fractal sum value is passed through this function. Available options are:
				<ul>
					<li><strong>none</strong>: the value is left untouched;</li>
					<li><strong>sine</strong>: the value is summed to the X coordinate multiplied by the <strong>Sine Frequency</strong> factor below, the the sine of the resulting value is computed and scaled to the range [0, 1];</li>
					<li><strong>modular</strong>: the value is multiplied by the <strong>Amplitude</strong> factor below, then its decimal part is returned;</li>
					<li><strong>custom</strong>: you can manually set the function that will be used.</li>
				</ul>
			</div>
			<select id="sumFunction">
				<option value="none">none</option>
				<option value="sine">sine</option>
				<option value="modular">modular</option>
				<option value="custom">custom</option>
			</select>
		</div>
		<div class="row control" id="custom-sum-function-container">
			<label for="customSumFunction">Custom Function</label>
			<div class="tooltip">
				Here you can provide the actual body of the javascript function that will be applied to fractal sums.<br />
				The function takes three arguments:
				<ul>
					<li><strong>n</strong>: the octave value, in the range [0, 1];</li>
					<li><strong>x</strong>: the x coordinate of the value being computed;</li>
					<li><strong>y</strong>: the y coordinate of the value being computed;</li>
				</ul>
				The function should return a value in the range [0, 1].<br />
				The function declaration (<code>function(x, y, z, o){</code>) and closing bracket are automatically added respectively before and after your code, so you must not write them.<br />
				An example could be:<br />
				<code class="code">return Math.cos(y + n * x);</code>
			</div>
			<textarea id="customSumFunction"></textarea>
		</div>
		<div class="row control slider" id="sine-container">
			<label for="sineFrequencyCoeff">Sine Frequency</label>
			<div class="tooltip">
				The X coordinate will be multiplied by this factor before being added to the fractal sum and used as the sine argument.
			</div>
			<input id="sineFrequencyCoeff" type="text" readonly="readonly" />
			<div id="sineFrequencyCoeffSlider" class="slider"></div>
		</div>
		<div class="row control slider" id="modular-container">
			<label for="modularAmplitude">Amplitude</label>
			<div class="tooltip">
				The fractal sum will be multiplied by this factor.
			</div>
			<input id="modularAmplitude" type="text" readonly="readonly" />
			<div id="modularAmplitudeSlider" class="slider"></div>
		</div>
		<div class="row">
			<button id="refresh">refresh</button>
		</div>
		<div class="row">
			<button id="download">download PNG</button>
		</div>
		<div id="progress"></div>
	</div>
</div>
<div id="update-error" title="Error">
	<p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span><span id="update-error-message"></span></p>
</div>
</body>
</html>